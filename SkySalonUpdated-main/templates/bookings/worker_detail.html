{% extends 'bookings/base.html' %}
{% load static %}

{% block title %}{{ worker.full_name }} | Sky Salon and Beauty{% endblock %}

{% block content %}
<section class="worker-profile">
    <div class="profile-header">
        {% if worker.photo %}
        <img class="worker-photo" src="{{ worker.photo.url }}" alt="{{ worker.full_name }}" />
        {% endif %}
        <div class="profile-meta">
            <h2>{{ worker.full_name }}</h2>
            {% if worker.role %}<div class="worker-role">{{ worker.role }}</div>{% endif %}
            {% if worker.bio %}<p class="worker-bio">{{ worker.bio }}</p>{% endif %}
            <div class="profile-actions">
                <a class="btn" href="{% url 'calendar' %}?worker={{ worker.id }}&date={{ today|date:'Y-m-d' }}">View Calendar</a>
                <a class="btn btn-primary" href="{% url 'book' %}?worker={{ worker.id }}">Book with {{ worker.full_name }}</a>
            </div>
        </div>
    </div>

    <div class="profile-prices">
        <h3>Services & Prices</h3>
        <table class="price-table">
            <thead>
                <tr>
                    <th>Service</th>
                    <th>Duration</th>
                    <th>Price</th>
                    <th></th>
                </tr>
            </thead>
            <tbody>
                {% for item in prices %}
                <tr>
                    <td>{{ item.service.name }}</td>
                    <td>{{ item.duration_minutes }} min</td>
                    <td>{{ item.price }}</td>
                    <td><a class="btn" href="{% url 'book' %}?worker={{ worker.id }}&service={{ item.service.id }}">Book</a></td>
                </tr>
                {% empty %}
                <tr><td colspan="4">No price information available.</td></tr>
                {% endfor %}
            </tbody>
        </table>
    </div>
</section>

<style>
.worker-profile .profile-header{display:flex;gap:16px;align-items:flex-start;background:var(--white);border:1px solid #eee;padding:16px;border-radius:12px;margin-bottom:24px}
.worker-profile .worker-photo{width:220px;aspect-ratio:1/1;object-fit:cover;border-radius:10px}
.worker-profile .profile-meta h2{margin:0}
.profile-actions{margin-top:12px;display:flex;gap:8px}
.profile-prices{background:var(--white);border:1px solid #eee;padding:16px;border-radius:12px}
@media (max-width:768px){
  .worker-profile .profile-header{flex-direction:column}
  .worker-profile .worker-photo{width:100%}
}
</style>
{% endblock %}


